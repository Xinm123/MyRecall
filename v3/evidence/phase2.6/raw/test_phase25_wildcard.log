============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /opt/homebrew/Caskroom/miniforge/base/envs/v3/bin/python3
cachedir: .pytest_cache
rootdir: /Users/pyw/newpart/MyRecall
configfile: pytest.ini
plugins: anyio-4.12.1
collecting ... collected 73 items

tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_returns_paginated PASSED [  1%]
tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_status_filter PASSED [  2%]
tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_monitor_id_filter PASSED [  4%]
tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_pagination PASSED [  5%]
tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_page_size_alias PASSED [  6%]
tests/test_phase25_api.py::TestVideoChunksAPI::test_list_video_chunks_empty_db PASSED [  8%]
tests/test_phase25_api.py::TestVideoChunkFileAPI::test_serve_video_chunk_file PASSED [  9%]
tests/test_phase25_api.py::TestVideoChunkFileAPI::test_serve_nonexistent_chunk_404 PASSED [ 10%]
tests/test_phase25_api.py::TestVideoChunkFileAPI::test_serve_missing_file_404 PASSED [ 12%]
tests/test_phase25_api.py::TestVideoChunkFileAPI::test_path_traversal_blocked_403 PASSED [ 13%]
tests/test_phase25_api.py::TestVideoFramesAPI::test_list_frames_paginated PASSED [ 15%]
tests/test_phase25_api.py::TestVideoFramesAPI::test_list_frames_chunk_id_filter PASSED [ 16%]
tests/test_phase25_api.py::TestVideoFramesAPI::test_list_frames_time_range_filter PASSED [ 17%]
tests/test_phase25_api.py::TestVideoFramesAPI::test_list_frames_includes_ocr_snippet PASSED [ 19%]
tests/test_phase25_api.py::TestVideoFramesAPI::test_list_frames_empty_db PASSED [ 20%]
tests/test_phase25_api.py::TestVideoStatsAPI::test_video_stats_structure PASSED [ 21%]
tests/test_phase25_api.py::TestVideoStatsAPI::test_video_stats_values PASSED [ 23%]
tests/test_phase25_api.py::TestVideoStatsAPI::test_video_stats_empty_db PASSED [ 24%]
tests/test_phase25_api.py::TestAudioChunkFileAPI::test_serve_audio_chunk_file PASSED [ 26%]
tests/test_phase25_api.py::TestAudioChunkFileAPI::test_serve_nonexistent_chunk_404 PASSED [ 27%]
tests/test_phase25_api.py::TestAudioChunkFileAPI::test_serve_missing_file_404 PASSED [ 28%]
tests/test_phase25_api.py::TestAudioChunkFileAPI::test_path_traversal_blocked_403 PASSED [ 30%]
tests/test_phase25_api.py::TestAudioStatsAPI::test_audio_stats_structure PASSED [ 31%]
tests/test_phase25_api.py::TestAudioStatsAPI::test_audio_stats_values PASSED [ 32%]
tests/test_phase25_api.py::TestAudioStatsAPI::test_audio_stats_empty_db PASSED [ 34%]
tests/test_phase25_api.py::TestAudioStatsAPI::test_audio_stats_include_source_counts PASSED [ 35%]
tests/test_phase25_api.py::TestAudioStatsAPI::test_audio_stats_duration_aggregates_chunk_timing PASSED [ 36%]
tests/test_phase25_api.py::TestAudioChunksDeviceFilter::test_device_filter_returns_matching PASSED [ 38%]
tests/test_phase25_api.py::TestAudioChunksDeviceFilter::test_device_filter_no_match_returns_empty PASSED [ 39%]
tests/test_phase25_api.py::TestAudioChunksDeviceFilter::test_no_device_returns_all PASSED [ 41%]
tests/test_phase25_api.py::TestAudioChunksSourceAndShape::test_source_filter_returns_only_input_rows PASSED [ 42%]
tests/test_phase25_api.py::TestAudioChunksSourceAndShape::test_audio_chunks_include_transcription_count_fields PASSED [ 43%]
tests/test_phase25_api.py::TestAudioTranscriptionsSourceAndShape::test_transcriptions_support_source_filter_and_file_url PASSED [ 45%]
tests/test_phase25_api.py::TestFileServingPathSecurity::test_video_dotdot_traversal PASSED [ 46%]
tests/test_phase25_api.py::TestFileServingPathSecurity::test_audio_dotdot_traversal PASSED [ 47%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_route_returns_200 PASSED [ 49%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_extends_layout PASSED [ 50%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_alpine_component PASSED [ 52%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_stats_injection PASSED [ 53%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_empty_state PASSED [ 54%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_chunk_table PASSED [ 56%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_audio_player PASSED [ 57%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_transcriptions_fetch_is_not_fixed_to_first_page PASSED [ 58%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_error_banner PASSED [ 60%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_filter_controls PASSED [ 61%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_marker_rail PASSED [ 63%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_has_thread_view PASSED [ 64%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_no_longer_splits_chunks_and_transcriptions_tabs PASSED [ 65%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_renders_transcriptions_under_chunk PASSED [ 67%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_chunk_loop_does_not_use_nested_plain_template PASSED [ 68%]
tests/test_phase25_audio_page.py::TestAudioPage::test_audio_page_play_segment_uses_transcription_window PASSED [ 69%]
tests/test_phase25_navigation.py::TestNavLinks::test_audio_link_removed_from_header PASSED [ 71%]
tests/test_phase25_navigation.py::TestNavLinks::test_video_link_in_header PASSED [ 72%]
tests/test_phase25_navigation.py::TestNavLinks::test_audio_icon_not_rendered_in_header PASSED [ 73%]
tests/test_phase25_navigation.py::TestNavLinks::test_video_icon_rendered PASSED [ 75%]
tests/test_phase25_navigation.py::TestCSSHighlighting::test_audio_css_rule_removed PASSED [ 76%]
tests/test_phase25_navigation.py::TestCSSHighlighting::test_video_css_rule_present PASSED [ 78%]
tests/test_phase25_navigation.py::TestJSDetection::test_audio_path_detection_removed PASSED [ 79%]
tests/test_phase25_navigation.py::TestJSDetection::test_video_path_detection PASSED [ 80%]
tests/test_phase25_navigation.py::TestExistingPagesRegression::test_index_returns_200 PASSED [ 82%]
tests/test_phase25_navigation.py::TestExistingPagesRegression::test_timeline_returns_200 PASSED [ 83%]
tests/test_phase25_navigation.py::TestExistingPagesRegression::test_search_returns_200 PASSED [ 84%]
tests/test_phase25_navigation.py::TestExistingPagesRegression::test_audio_returns_200 PASSED [ 86%]
tests/test_phase25_navigation.py::TestExistingPagesRegression::test_video_returns_200 PASSED [ 87%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_route_returns_200 PASSED [ 89%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_extends_layout PASSED [ 90%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_has_alpine_component PASSED [ 91%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_has_stats_injection PASSED [ 93%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_empty_state PASSED [ 94%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_has_chunk_table PASSED [ 95%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_has_video_player PASSED [ 97%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_has_frame_gallery PASSED [ 98%]
tests/test_phase25_video_page.py::TestVideoPage::test_video_page_guards_collapsed_chunk_during_async_frame_fetch PASSED [100%]

============================== 73 passed in 6.23s ==============================
