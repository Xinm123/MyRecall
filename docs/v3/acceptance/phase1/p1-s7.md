# P1-S7 验收记录（端到端验收）

- 阶段：P1-S7
- 日期：2026-03-20（计划）
- 负责人：TBD
- 版本/提交：TBD
- 状态：`Planned`

## 0. screenpipe 对照与对齐

- screenpipe 做法：强调从数据采集到用户交互的闭环可用性与持续回归。
- 本阶段对齐：以关键用户路径做 E2E 验收与故障注入回归；不追求同拓扑实现。

## 1. 范围与目标

- 范围：P1 全链路（capture -> processing -> search -> chat -> citation 回溯）端到端验收。
- 目标：确认 P1 功能冻结基线可用、可恢复、可追溯，并为 P2/P3 提供稳定起点。
- 对应 Gate 条件：
  - TTS P95 <= 12s。
  - S1~S6 回归全通过。
  - P1 功能清单完成率 = 100%。
  - P1 验收记录完整率 = 100%。
  - UI 关键路径脚本通过率 = 100%。
  - 观测 KPI（non-blocking）：Chat 引用覆盖率目标 >= 92%，Stretch >= 95%。

## 2. 环境与输入

- 运行环境：同 P1-S1。
- 配置与数据集：
  - E2E 场景集（>= 30 条，覆盖常见检索与问答任务）
  - 故障注入集（断网、重复包、OCR 失败、模型超时）
- 依赖版本：P1-S1~S6 基线版本

## 3. 验收步骤

1. 逐项确认 S1~S6 前置 Gate 结果均为 Pass。
2. 执行关键路径脚本：`timeline -> search -> chat -> citation -> frame`。
3. 统计 TTS（capture 到可检索）P95。
4. 运行 chat 问题集，统计引用覆盖率并抽检真实性。
5. 执行故障注入场景，验证链路可恢复与错误可见。
6. 汇总功能清单、契约清单、异常场景清单完成度。
7. 归档证据：日志、截图、录屏、指标导出。

## 4. 结果与指标

### 4.1 数值指标（可放宽，但需达标）

- Chat 引用覆盖率（Soft KPI 目标 >= 92%，Stretch >= 95%，non-blocking）：
- TTS P95（目标 <= 12s）：
- UI 关键路径脚本通过率（目标 = 100%）：

### 4.2 功能完成度指标（强制）

- 功能清单完成率（目标 100%）：
- API/Schema 契约完成率（目标 100%）：
- 关键功能用例通过率（目标 >= 95%）：

### 4.3 完善度指标（强制）

- 异常与降级场景通过率（目标 >= 95%）：
- 可观测性检查项完成率（目标 100%，日志/指标/错误码）：
- 文档与验收记录完整率（目标 100%）：

### 4.4 UI 验收（按阶段启用）

- 路由可达与基础状态可见性检查（健康态/错误态）：全通过。
- UI 关键交互通过率（如 timeline/search/chat/citation）：关键路径脚本 100% 通过。
- UI 证据附件（截图/录屏/日志路径）：

## 5. 结论

- Gate 结论：`Pass` | `Fail`
- 依据：
- 阻塞项（若 Fail 必填）：

## 6. 风险与后续动作

- 风险：若 E2E 仅在同机验证，P2 LAN 风险可能被低估。
- 后续动作：将本文件中失败样例直接迁移到 Phase2 回归集。
