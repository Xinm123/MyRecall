# P1-S2 验收记录（采集）

- 阶段：P1-S2
- 日期：2026-03-08（计划）
- 负责人：TBD
- 版本/提交：TBD
- 状态：`Planned`

## 0. screenpipe 对照与对齐

- screenpipe 做法：事件驱动采集（app switch/click/typing/idle）并与上下文信息关联。
- 本阶段对齐：对齐事件驱动触发语义；保留 MyRecall Edge-Centric 拓扑。

## 1. 范围与目标

- 范围：Host 事件驱动 capture、idle fallback、AX 文本采集并上传。
- 目标：验证触发覆盖、性能与数据完整性，同时让 timeline 可见上传/入队状态。
- 对应 Gate 条件：
  - 切窗场景 95% capture 在 3 秒内入 Edge 队列。
  - 每分钟 300 次事件压测下 Host CPU < 25%，丢包率 < 0.3%。
  - 事件触发清单覆盖率 >= 95%。
  - 新 capture 在 timeline 可见性通过率 >= 95%。

## 2. 环境与输入

- 运行环境：同 P1-S1。
- 配置与数据集：
  - 触发事件脚本（app switch/click/typing pause/idle）
  - 多窗口场景数据 30 分钟
- 依赖版本：记录客户端触发模块版本

## 3. 验收步骤

1. 启动 Host/Edge，开启采集 debug 日志。
2. 按触发清单执行操作：
   - app switch（>= 50 次）
   - click（>= 100 次）
   - typing pause（>= 50 次）
   - idle fallback（>= 20 次）
3. 记录每次触发到入队的端到端延迟，统计 P95。
4. 执行 300 events/min 压测 10 分钟，记录 Host CPU 峰值与平均值。
5. 对账触发日志与入队记录，计算丢包率。
6. 抽样核验 AX 文本采集字段（app/window/timestamp/trigger）完整性。
7. 打开 timeline，确认新 capture 的“上传中/已入队/失败重试”状态可见。

## 4. 结果与指标

### 4.1 数值指标（可放宽，但需达标）

- Capture 入队延迟 P95（目标 <= 3s）：
- Host CPU（300 events/min，目标 < 25%）：
- 丢包率（目标 < 0.3%）：

### 4.2 功能完成度指标（强制）

- 功能清单完成率（目标 100%）：
- API/Schema 契约完成率（目标 100%）：
- 关键功能用例通过率（目标 >= 95%）：

### 4.3 完善度指标（强制）

- 异常与降级场景通过率（目标 >= 95%）：
- 可观测性检查项完成率（目标 100%，日志/指标/错误码）：
- 文档与验收记录完整率（目标 100%）：

### 4.4 UI 验收（按阶段启用）

- 路由可达与基础状态可见性检查（健康态/错误态）：通过。
- UI 关键交互通过率（如 timeline/search/chat/citation）：本阶段检查 timeline 新 capture 可见率 >= 95%。
- UI 证据附件（截图/录屏/日志路径）：

## 5. 结论

- Gate 结论：`Pass` | `Fail`
- 依据：
- 阻塞项（若 Fail 必填）：

## 6. 风险与后续动作

- 风险：事件风暴可能引发误触发过采样。
- 后续动作：若失败，调整事件去抖与最小采样间隔后复测。
