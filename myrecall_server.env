# OpenRecall Configuration
# Created by Trae AI based on user request to use API for VL and Embedding

# ==============================================================================
# AI Provider Configuration (Global)
# ==============================================================================
# Use 'openai' for OpenAI-compatible APIs (OpenAI, DeepSeek, vLLM, etc.)
# Use 'dashscope' for Aliyun DashScope
OPENRECALL_AI_PROVIDER=openai

# Timeout for AI provider requests in seconds (Default: 120)
OPENRECALL_AI_REQUEST_TIMEOUT=120

# OPENRECALL_AUDIO_VAD_BACKEND=webrtcvad
OPENRECALL_AUDIO_VAD_BACKEND=silero

# API Key (Required)
OPENRECALL_AI_API_KEY='sk-yowawdangondqlezbiwulngweoqcauqkuhozedcidzcrdrjk'
# OPENRECALL_AI_API_KEY='ms-230d5d2f-de65-406f-9563-f30d82b9eb9b'
#'sk-yowawdangondqlezbiwulngweoqcauqkuhozedcidzcrdrjk'
# Base URL (Optional, for proxies or alternative providers)
# OPENRECALL_AI_API_BASE=https://api-inference.modelscope.cn/v1
OPENRECALL_AI_API_BASE=https://api.siliconflow.cn/v1/
# https://api.siliconflow.cn/v1/


# ==============================================================================
# Vision Language Model (VL) Settings
# ==============================================================================
# Falls back to OPENRECALL_AI_PROVIDER if not set
OPENRECALL_VISION_PROVIDER=openai

# Model Name (e.g., gpt-4o, gpt-4o-mini, qwen-vl-max)
OPENRECALL_VISION_MODEL_NAME=Qwen/Qwen3-VL-8B-Instruct
# OPENRECALL_VISION_MODEL_NAME=Qwen/Qwen3-VL-32B-Instruct

# ==============================================================================
# Embedding Model Settings
# ==============================================================================
# Falls back to OPENRECALL_AI_PROVIDER if not set
OPENRECALL_EMBEDDING_PROVIDER=openai

# Model Name (e.g., text-embedding-3-small, text-embedding-v3)
OPENRECALL_EMBEDDING_MODEL_NAME=Qwen/Qwen3-Embedding-0.6B

# Embedding Dimension (Must match the model output)
# text-embedding-3-small: 1536
# text-embedding-3-large: 3072
# qwen-text-v1 (local): 1024
OPENRECALL_EMBEDDING_DIM=1024

# ==============================================================================
# OCR Settings (Optional)
# ==============================================================================
# You can also use API for OCR if desired, or keep it local
# OPENRECALL_OCR_PROVIDER=rapidocr
OPENRECALL_OCR_PROVIDER=doctr
# OPENRECALL_OCR_MODEL_NAME=gpt-4o-mini
OPENRECALL_OCR_RAPID_USE_LOCAL=true
OPENRECALL_OCR_RAPID_MODEL_DIR=/Users/tiiny/models/RapidOCR
# Optional: Specify exact paths for RapidOCR models (overrides default paths in MODEL_DIR)
OPENRECALL_OCR_RAPID_DET_MODEL=/Users/tiiny/models/RapidOCR-5v/ch_PP-OCRv5_server_det.onnx
OPENRECALL_OCR_RAPID_REC_MODEL=/Users/tiiny/models/RapidOCR-5v/ch_PP-OCRv5_rec_server_infer.onnx
OPENRECALL_OCR_RAPID_CLS_MODEL=/Users/tiiny/models/RapidOCR-5v/ch_ppocr_mobile_v2.0_cls_infer.onnx  

# ==============================================================================
# System Settings
# ==============================================================================
OPENRECALL_PORT=18083
OPENRECALL_DEBUG=true

# Only capture the primary monitor (set to false to capture all monitors)
OPENRECALL_PRIMARY_MONITOR_ONLY=true

# Disable similarity-based deduplication (set to true to capture every cycle)
OPENRECALL_DISABLE_SIMILARITY_FILTER=false

# Similarity threshold (0.0-1.0). Higher values capture more (images considered similar when score >= threshold)
OPENRECALL_SIMILARITY_THRESHOLD=0.9

# Video chunk duration in seconds.
# NOTE (ops alignment only): this value is currently NOT directly used by server runtime.
# Actual recording chunk duration is controlled by the client-side setting in myrecall_client.env.
OPENRECALL_VIDEO_CHUNK_DURATION=60

# NOTE (ops alignment only): SCK retry/recovery knobs below are currently client-side behavior.
# They are listed here only to keep deployment configs aligned across machines.
OPENRECALL_SCK_START_RETRY_MAX=3
OPENRECALL_SCK_RETRY_BACKOFF_SECONDS=2
OPENRECALL_SCK_PERMISSION_BACKOFF_SECONDS=30
OPENRECALL_SCK_RECOVERY_PROBE_SECONDS=5
OPENRECALL_SCK_AUTO_RECOVER_FROM_LEGACY=true

# ==============================================================================
# Data Directory Settings
# ==============================================================================
# Server Data Directory (Default: ~/MRS)
OPENRECALL_SERVER_DATA_DIR=~/MRS
# Client Data Directory (Default: ~/MRC)
OPENRECALL_CLIENT_DATA_DIR=~/MRC

# ==============================================================================
# Reranker Settings
# ==============================================================================
# Mode: 'api' (default, requires external service) or 'local' (runs in-process)
OPENRECALL_RERANKER_MODE=api
# Model Name (Default: Qwen/Qwen3-Reranker-0.6B)
OPENRECALL_RERANKER_MODEL=Qwen/Qwen3-Reranker-0.6B
# API URL (Required if mode is 'api' and auto-inference fails)
# Common paths: /v1/rerank, /rerank
OPENRECALL_RERANKER_URL=https://api.siliconflow.cn/v1/rerank
# Optional: Specific API Key for Reranker (if different from global AI Key)
OPENRECALL_RERANKER_API_KEY=sk-yowawdangondqlezbiwulngweoqcauqkuhozedcidzcrdrjk

# ==============================================================================
# Debugging & Logging
# ==============================================================================
# Enable fusion text logging to logs/fusion_debug.log
OPENRECALL_FUSION_LOG_ENABLED=true
